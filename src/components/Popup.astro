---
import { Image } from "astro:assets";
import Button from '@/components/Button.astro';
import crossIcon from "@/assets/icons/cross.svg";
---

<div class="popup fade-up" data-popup>
  <div class="flex w-full justify-between items-center">
    <span>Nouveau projet : Plouvier</span>
    <Image class="cross" src={crossIcon} alt="IcÃ´ne de croix" />
  </div>
  <p class="mt-1">Voir le projet en cliquant sur le bouton juste en dessous</p>
  <div class="mt-3">
    <Button
      id="popup-button"
      theme="white-button"
      link="/projects/plouvier"
      text="Voir le projet"
    />
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const popup = document.querySelector("[data-popup]");
    const closeButton = popup.querySelector(".cross");

    if (sessionStorage.getItem("popupClosed")) {
      popup.classList.add("hidden");
    }

    closeButton.addEventListener("click", () => {
      popup.classList.add("hidden");
      sessionStorage.setItem("popupClosed", "true");
    });
  });
</script>
